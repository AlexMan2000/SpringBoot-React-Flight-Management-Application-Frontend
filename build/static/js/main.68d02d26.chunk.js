(this.webpackJsonpdatabase_front=this.webpackJsonpdatabase_front||[]).push([[0],{1164:function(e,t,a){"use strict";a.r(t);var i=a(0),r=a.n(i),n=a(47),s=a.n(n),l=(a(717),a(665)),c=a(68),o=a(1180),d=a(99),u=a(664),m=a(4),j=l.a.Title;function b(){return Object(m.jsx)("div",{style:{textAlign:"center",width:"100%",position:"absolute",top:"40vh"},children:Object(m.jsxs)(u.a,{type:"left",children:[Object(m.jsx)(j,{style:{},children:"Welcome to Our Airline System"},"ele1"),Object(m.jsx)(c.a,{type:"primary",shape:"circle",size:"large",children:Object(m.jsx)(d.b,{to:"/global",children:Object(m.jsx)(o.a,{})})},"ele2")]})})}var p=a(33),h=a(22),f=a(72),O=a(670),g=a(101),x=a(1181),y=a(1182),v=a(55),k=a(37),I=a.n(k);function A(e){var t=e.loginInfo,a=e.setInitializeType,r=e.setRegisterModalVisible,n=e.setNavigateBar,s=e.setLoginModalVisible,l=Object(v.f)(),o=f.a.useForm(),d=Object(h.a)(o,1)[0],u=Object(i.useState)("customer"),j=Object(h.a)(u,2),b=j[0],k=j[1],A={customer:"E-mail",agent:"E-mail",staff:"Username"};return Object(m.jsx)(O.a,{style:{width:"100%",display:"block",marginLeft:"auto",marginRight:"auto"},tabList:[{key:"customer",tab:"Customer"},{key:"agent",tab:"Booking Agent"},{key:"staff",tab:"Airline Staff"}],activeTab:b,onTabChange:function(e){k(e),d.resetFields()},children:Object(m.jsxs)(f.a,{form:d,name:"login",className:"login-form",onFinish:function(e){I()({url:"http://localhost:8080/login",method:"post",data:Object(p.a)({userType:b},e)}).then((function(e){var a=e.data;!0===a.status?("customer"===b?t.current=a.customer:"staff"===b?t.current=a.airlineStaff:"agent"===b&&(t.current=a.bookingAgent),n(b),s(!1),l("/"+b,{replace:!0})):1===a.statusCode?d.setFields([{name:"customer"===b?"email":"username",errors:["User Not Found! Please Register First!"]}]):2===a.statusCode?d.setFields([{name:"password",errors:["Password Error!"]}]):3===a.statusCode&&d.setFields([{name:"bookingAgentId",errors:["BookingId Error!"]}])})),console.log(e)},onFinishedFailed:function(){alert("\u5b57\u6bb5\u6709\u8bef"),console.log("haha")},children:["staff"===b&&Object(m.jsx)(f.a.Item,{name:"username",rules:[{required:!0,message:"Please input your "+A[b]}],children:Object(m.jsx)(g.a,{prefix:Object(m.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:A[b]})}),"staff"!=b&&Object(m.jsx)(f.a.Item,{name:"email",rules:[{required:!0,message:"Please input your email"},{type:"email",message:"This is not a valid email type"}],children:Object(m.jsx)(g.a,{prefix:Object(m.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:"E-mail"})}),Object(m.jsx)(f.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password"}],dependencies:["password"],children:Object(m.jsx)(g.a.Password,{prefix:Object(m.jsx)(y.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),"agent"===b&&Object(m.jsx)(f.a.Item,{name:"bookingAgentId",rules:[{required:!0,message:"Please input your booking agent Id"}],children:Object(m.jsx)(g.a,{prefix:Object(m.jsx)(x.a,{className:"site-form-item-icon"}),placeholder:"Agent Id"})}),Object(m.jsxs)(f.a.Item,{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Log in"}),Object(m.jsx)(c.a,{type:"primary",className:"register-form-button",style:{marginLeft:"270px"},onClick:function(){r(!0),a(b)},children:"Register"})]})]})})}var C="DD/MM/YYYY",S=a(139),w=a.n(S),T=a(159),F=a(146);function N(e){var t=e.initializeType,a=e.setRegisterModalVisible;console.log(t);var r=T.a.Option,n=Object(v.f)(),s=f.a.useForm(),l=Object(h.a)(s,1)[0],o=Object(i.useState)([]),d=Object(h.a)(o,2),u=d[0],j=d[1],b=Object(m.jsx)(f.a.Item,{name:"prefix",noStyle:!0,children:Object(m.jsxs)(T.a,{style:{width:70},children:[Object(m.jsx)(r,{value:"86",children:"+86"}),Object(m.jsx)(r,{value:"87",children:"+87"})]})}),x=(f.a.Item,T.a,Object(i.useState)([])),y=Object(h.a)(x,2),k=y[0];y[1],k.map((function(e){return{label:e,value:e}}));return Object(m.jsx)(O.a,{title:"Please input your personal information to register",children:Object(m.jsxs)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{form:l,name:"register",onFinish:function(e){console.log("Received values of form: ",e),I()({method:"POST",url:"customer"===t?"http://localhost:8080/register/registerCustomer":"staff"===t?"http://localhost:8080/register/registerAirlineStaff":"http://localhost:8080/register/registerBookingAgent",data:e}).then((function(e){"success"===e.data&&n("/login")}))},initialValues:{residence:["zhejiang","hangzhou","xihu"],prefix:"86"},scrollToFirstError:!0,children:[" ","staff"!==t&&Object(m.jsx)(f.a.Item,{name:"email",label:"E-mail",rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"},{validator:function(e,a,i){I()({method:"GET",url:"agent"===t?"http://localhost:8080/register/validateBookingAgent":"http://localhost:8080/register/validateCustomer",params:{email:a}}).then((function(e){console.log(e),!1===e.data.valid?(i("agent"===t?"Agent already registered!":"Customer already registered!"),console.log("\u8349")):(i(),console.log("haha"))})).catch((function(e){console.log("error")}))}}],validateTrigger:"onBlur",hasFeedback:!0,children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"staff"===t&&Object(m.jsx)(f.a.Item,{name:"username",label:"Username",validateTrigger:"onBlur",hasFeedback:!0,rules:[{required:!0,message:"Please input your username"},{validator:function(e,t,a){I()({method:"GET",url:"http://localhost:8080/register/validateAirlineStaff",params:{username:t}}).then((function(e){console.log(e),!1===e.data.valid?(a("Staff already registered!"),console.log("\u8349")):(a(),console.log("haha"))})).catch((function(e){console.log("error")}))}}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please input your name"}],hasFeedback:!0,children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),Object(m.jsx)(f.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"The length of the password cannot be less than 6 characters!"},{max:20,message:"The length of the password cannot be more than 20 characters!"},{pattern:/^[a-zA-Z]\w+/,message:"The password must start with alphabat"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("email")===a?Promise.reject(new Error("Email cannot be the same as the password!")):Promise.resolve()}}}],hasFeedback:!0,children:Object(m.jsx)(g.a.Password,{style:{width:"80%"}})}),Object(m.jsx)(f.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(m.jsx)(g.a.Password,{style:{width:"80%"}})}),"staff"===t&&Object(m.jsx)(f.a.Item,{name:"firstName",label:"First Name",tooltip:"What do you want others to call you?",rules:[{required:!0,message:"Please input your last name!",whitespace:!0}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"staff"===t&&Object(m.jsx)(f.a.Item,{name:"lastName",label:"Last Name",tooltip:"What do you want others to call you?",rules:[{required:!0,message:"Please input your last name!",whitespace:!0}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"agent"!==t&&Object(m.jsx)(f.a.Item,{name:"birthday",label:"Birth Day",tooltip:"Click the calendar button to select a date",rules:[{required:!0,message:"Please input your birth day!"}],children:Object(m.jsx)(F.a,{format:C,style:{width:200}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"phoneNumber",label:"Phone Number",rules:[{required:!0,message:"Please input your phone number!"}],children:Object(m.jsx)(g.a,{addonBefore:b,style:{width:"80%"}})}),"staff"===t&&Object(m.jsx)(f.a.Item,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Please input donation amount!"}],children:Object(m.jsx)(T.a,{onFocus:function(){I()({method:"GET",url:"http://localhost:8080/register/getAirlineList"}).then((function(e){console.log(e.data),j(e.data),console.log("data injection completed")})).catch((function(e){console.log("error")}))},placeholder:"Please select a country",style:{width:"80%"},children:u.map((function(e){return Object(m.jsx)(r,{value:e,children:e},e)}))})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"buildingNumber",label:"Building Number",rules:[{required:!0,message:"Please input your building number!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"street",label:"Street Info",rules:[{required:!0,message:"Please input your street info!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"city",label:"City",tooltip:"Could register with abbreviation",rules:[{required:!0,message:"Please input your city!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"livingState",label:"State",rules:[{required:!0,message:"Please input your state info!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"passportNumber",label:"Passport Number",rules:[{required:!0,message:"Please input your passport number!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"passportExpiration",label:"Passport Expiration Date",rules:[{required:!0,message:"Please input your passport expiration date!"}],children:Object(m.jsx)(F.a,{format:C,style:{width:200}})}),"customer"===t&&Object(m.jsx)(f.a.Item,{name:"passportCountry",label:"Passport Country",rules:[{required:!0,message:"Please input your passport country!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),"agent"===t&&Object(m.jsx)(f.a.Item,{name:"bookingAgentId",label:"Agent Id",rules:[{required:!0,message:"Please input your agent ID!"}],children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),Object(m.jsx)(f.a.Item,{name:"intro",label:"Intro",children:Object(m.jsx)(g.a.TextArea,{showCount:!0,maxLength:100,style:{width:"80%"}})}),Object(m.jsxs)(f.a.Item,Object(p.a)(Object(p.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"Register"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){a(!1)},children:"Back"})]}))]}))})}var P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1189)).then((function(t){var a=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),i(e),r(e),n(e),s(e)}))},D=(a(514),a(1175)),R=a(103),M=a(668),V=a(1179),_=a(168),E=a(669),q=a(1177),B=a(1184),Y=a(1183),z=R.a.SubMenu;function L(e){var t=e.loginInfo,a=e.updateSelection,r=(e.defaultData,e.setActionType),n=e.setFlightResult,s={1:"Search flights",2:"Purchase tickets",3:"My flights",4:"Track spending",5:"Logout"},l=Object(v.f)(),c={1:"search",2:"purchase",3:"view"};return Object(i.useEffect)((function(){a("Search flights"),r("search")}),[]),Object(m.jsxs)(R.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],onClick:function(e){"Logout"==s[e.key]&&(t.current=null,l("/",{replace:!0})),a(s[e.key]),n(null),r(c[e.key])},style:{height:"100%",borderRight:0},children:[Object(m.jsxs)(z,{icon:Object(m.jsx)(Y.a,{}),title:"Booking",children:[Object(m.jsx)(R.a.Item,{children:s[1]},"1"),Object(m.jsx)(R.a.Item,{children:s[2]},"2")]},"sub1"),Object(m.jsxs)(z,{icon:Object(m.jsx)(x.a,{}),title:"Mine",children:[Object(m.jsx)(R.a.Item,{children:s[3]},"3"),Object(m.jsx)(R.a.Item,{children:s[4]},"4")]},"sub2"),Object(m.jsx)(z,{icon:Object(m.jsx)(B.a,{}),title:"Operation",children:Object(m.jsx)(R.a.Item,{children:s[5]},"5")},"sub3")]})}var G=a(484),U={upcoming:"blue",cancelled:"gray","checking in":"yellow",delayed:"red","on time":"green"},K=a(673),H=a(58),W=a(674),Z=a(1185),X=[{title:"Flight No.",dataIndex:"flight_id",key:"flight"},{title:"Dept. Airport",dataIndex:"dept",key:"dept"},{title:"Arri. Airport",dataIndex:"arri",key:"arri"},{title:"Dept. Time",dataIndex:"dept_time",key:"dept_time"},{title:"Arri. Time",dataIndex:"arri_time",key:"arri_time"},{title:"Status",dataIndex:"status",key:"status",render:function(e){return Object(m.jsx)(m.Fragment,{children:e.map((function(e){return Object(m.jsx)(K.a,{color:U[e],children:e.toUpperCase()},e)}))})}}];var J=a(393),$=a(1186),Q=(a(287),a(34)),ee=a.n(Q);function te(e){var t=e.customerModalVis,a=e.setCustomerModalVis,r=e.rowRecord,n=e.setRowRecord,s=Object(i.useState)("purchase"),l=Object(h.a)(s,2),o=l[0],d=l[1],u=Object(i.useState)({}),j=Object(h.a)(u,2),b=j[0],O=j[1],x=f.a.Item,y=f.a.useForm(),v=Object(h.a)(y,1)[0],k=[{title:"Airline Name",description:b.airlineName},{title:"Flight No.",description:b.flightNum},{title:"Purchase Date",description:b.purchaseDate},{title:"Ticket ID",description:b.ticketNum}];return Object(m.jsx)(M.a,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"purchase"===o?"Purchase Ticket":"Purchasement Info",visible:t,footer:"purchase"===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(c.a,{onClick:function(){return a(!1)},children:"Cancel"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){return console.log({airlineName:v.getFieldValue("airlineName"),flightNum:v.getFieldValue("flightNum"),email:"12345@qq.com",bookingAgentId:null}),void I()({url:"http://localhost:8080/customer/purchaseTicket",method:"POST",data:{airlineName:v.getFieldValue("airlineName"),flightNum:v.getFieldValue("flightNum"),email:"12345@qq.com",bookingAgentId:null}}).then((function(e){e.data&&(d("confirm"),O(e.data))}))},children:"Purchase"})]}):"confirm"===o?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(c.a,{type:"primary",onClick:function(){a(!1),d("purchase")},children:"Confirm"})}):void 0,onCancel:function(){a(!1),n(!1)},children:Object(m.jsx)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{span:7},wrapperCol:{span:13}}),{},{form:v,initialValues:{airlineName:r.airline,flightNum:r.flight_id},children:"purchase"===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{name:"flightNum",label:"Flight Number",rules:[{required:!0,message:"Please input flight number!"}],children:Object(m.jsx)(g.a,{disabled:!0})}),Object(m.jsx)(x,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Please input airline name!"}],children:Object(m.jsx)(g.a,{disabled:!0})})]}):"confirm"===o?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(V.b,{itemtlayout:"horizontal",dataSource:k,renderItem:function(e){return Object(m.jsx)(V.b.Item,{children:Object(m.jsx)(V.b.Item.Meta,{title:e.title,description:e.description})})}})}):void 0}))})}function ae(e){var t=e.agentModalVis,a=e.setAgentModalVis,r=e.rowRecord,n=e.setRowRecord,s=Object(i.useState)("purchase"),l=Object(h.a)(s,2),o=l[0],d=l[1],u=Object(i.useState)({}),j=Object(h.a)(u,2),b=j[0],O=j[1],x=f.a.Item,y=f.a.useForm(),v=Object(h.a)(y,1)[0],k=[{title:"Airline Name",description:b.airlineName},{title:"Flight No.",description:b.flightNum},{title:"Customer on behalf",description:b.email},{title:"Commission Fee Earned",description:b.commissionFee},{title:"Purchase Date",description:b.purchaseDate},{title:"Ticket ID",description:b.ticketNum}],A=function(e,t,a){I()({method:"GET",url:"http://localhost:8080/bookingAgent/validateCustomer",params:{email:t}}).then((function(e){!1===e.data.valid?(console.log("false"),a("Customer Email not found!")):a()}))};return console.log(r.airline),Object(m.jsx)(M.a,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"purchase"===o?"Purchase Ticket":"Purchasement Info",visible:t,footer:"purchase"===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(c.a,{onClick:function(){return a(!1)},children:"Cancel"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){I()({url:"http://localhost:8080/bookingAgent/purchaseTicket",method:"POST",data:{airlineName:v.getFieldValue("airlineName"),flightNum:v.getFieldValue("flightNum"),email:v.getFieldValue("email"),bookingAgentId:13123123}}).then((function(e){e.data&&(d("confirm"),O(e.data))}))},children:"Purchase"})]}):"confirm"===o?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(c.a,{type:"primary",onClick:function(){a(!1),d("purchase")},children:"Confirm"})}):void 0,onCancel:function(){a(!1),n(!1)},children:Object(m.jsx)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{span:7},wrapperCol:{span:13}}),{},{form:v,initialValues:{airlineName:r.airline,flightNum:r.flight_id},children:"purchase"===o?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{name:"flightNum",label:"Flight Number",rules:[{required:!0,message:"Please input flight number!"}],children:Object(m.jsx)(g.a,{disabled:!0,placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(x,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Please input airline name!"}],children:Object(m.jsx)(g.a,{disabled:!0,placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(x,{name:"email",label:"Customer Email",rules:[{required:!0,message:"Please input the customer email that you want to purchase on behalf of"},{validator:A}],children:Object(m.jsx)(g.a,{placeholder:"Please input customer email"})})]}):"confirm"===o?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(V.b,{itemtlayout:"horizontal",dataSource:k,renderItem:function(e){return Object(m.jsx)(V.b.Item,{children:Object(m.jsx)(V.b.Item.Meta,{title:e.title,description:e.description})})}})}):void 0}))})}g.a.Search;var ie=T.a.Option;function re(e){var t=e.data,a=e.userType,i=e.actionType,r=e.setRowRecord,n=e.setCustomerModalVis,s=e.setAgentModalVis,l=(F.a.RangePicker,"customer"===a?[{title:"Flight No.",dataIndex:"flight_id",key:"flight"},{title:"Dept. Airport",dataIndex:"dept",key:"dept"},{title:"Arri. Airport",dataIndex:"arri",key:"arri"},{title:"Dept. Time",dataIndex:"dept_time",key:"dept_time"},{title:"Arri. Time",dataIndex:"arri_time",key:"arri_time"},{title:"Price",dataIndex:"price",key:"price"},{title:"Status",dataIndex:"status",key:"status",render:function(e){return Object(m.jsx)(m.Fragment,{children:e.map((function(e){return Object(m.jsx)(K.a,{color:U[e],children:e.toUpperCase()},e)}))})}},{title:"Action",key:"action",render:function(e,t){return Object(m.jsx)(H.b,{size:"middle",children:Object(m.jsxs)(c.a,{disabled:"cancelled"==t.status,onClick:function(){n(!0),r(t)},children:["Book ",t.flight_id]})})}}]:"agent"===a?[{title:"Ticket Id",dataIndex:"ticket_id",key:"ticket"},{title:"Flight No.",dataIndex:"flight_id",key:"flight"},{title:"Airline Name",dataIndex:"airline",key:"airline"},{title:"Dept. Airport",dataIndex:"dept",key:"dept"},{title:"Arri. Airport",dataIndex:"arri",key:"arri"},{title:"Dept. Time",dataIndex:"dept_time",key:"dept_time"},{title:"Arri. Time",dataIndex:"arri_time",key:"arri_time"},{title:"Price",dataIndex:"price",key:"price"},{title:"Customer Email",dataIndex:"customerEmail",key:"customerEmail"},{title:"Status",dataIndex:"status",key:"status",render:function(e){return Object(m.jsx)(m.Fragment,{children:e.map((function(e){return Object(m.jsx)(K.a,{color:U[e],children:e.toUpperCase()},e)}))})}},{title:"Action",key:"action",render:function(e,t){return Object(m.jsx)(H.b,{size:"middle",children:Object(m.jsxs)(c.a,{disabled:"cancelled"==t.status||!0===t.full,onClick:function(){s(!0),r(t)},children:["Book ",t.flight_id]})})}}]:X),o=t;return"view"!==i?o=t.map((function(e){return{key:[e.airlineName,e.flightNum],flight_id:e.flightNum,airline:e.airlineName,dept:e.sourceAirportName,arri:e.destAirportName,dept_time:e.departureTime,arri_time:e.arrivalTime,price:e.price,status:[e.status]}})):"view"===i&&(console.log(t),o=t.map((function(e){return{key:e.ticketId,ticket_id:e.ticketId,flight_id:e.flightNum,airline:e.airlineName,dept:e.sourceAirportName,arri:e.destAirportName,dept_time:e.departureTime,arri_time:e.arrivalTime,price:e.price,customerEmail:e.customerEmail,status:[e.status]}}))),console.log(o),"view"!==i&&(l=l.filter((function(e){return"Ticket Id"!=e.title&&"Customer Email"!==e.title}))),"purchase"!==i&&(l=l.filter((function(e){return"Action"!=e.title}))),"search"===i&&(l=l.filter((function(e){return"User ID"!=e.title}))),Object(m.jsx)(G.a,{columns:l,dataSource:o,size:"middle"})}function ne(e){var t=e.userType,a=e.actionTab,r=e.flightsResult,n=e.setFlightResult,s=e.actionType,l=F.a.RangePicker,o=Object(i.useState)(void 0),d=Object(h.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)(void 0),p=Object(h.a)(b,2),f=p[0],x=p[1],y=Object(i.useState)(""),v=Object(h.a)(y,2),k=v[0],A=v[1],S=Object(i.useState)(""),N=Object(h.a)(S,2),P=N[0],D=N[1],R=Object(i.useState)([]),M=Object(h.a)(R,2),V=M[0],_=M[1],E=Object(i.useState)(void 0),q=Object(h.a)(E,2),B=q[0],Y=(q[1],Object(i.useState)(void 0)),z=Object(h.a)(Y,2),L=z[0],G=z[1],U=Object(i.useState)(!1),K=Object(h.a)(U,2),H=K[0],W=K[1],Z=Object(i.useState)(!1),X=Object(h.a)(Z,2),Q=X[0],ee=X[1],ne=function(){I()({url:"http://localhost:8080/index/searchAirports",type:"GET"}).then((function(e){e.data?_(e.data):console.log("No Results")}))},se=V.map((function(e){return Object(m.jsx)(ie,{children:e},e)})),le=function(e){e?setTimeout(ne,500):_([])},ce=function(e){return function(t){e(t)}};return Object(m.jsxs)(O.a,{title:"view"!==a?"Start planning your journey, Username!":"Welcome you",children:[Object(m.jsxs)(g.a.Group,{children:[Object(m.jsx)("b",{children:"From:"}),Object(m.jsx)(T.a,{showSearch:!0,addonBefore:"From",style:{width:300,padding:10},placeholder:"Departure Airport",value:u,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:le,onChange:ce(j),notFoundContent:null,allowClear:!0,children:se}),Object(m.jsx)(c.a,{shape:"circle",icon:Object(m.jsx)($.a,{}),onClick:function(){var e=u;j(f),x(e)}}),Object(m.jsx)("b",{style:{paddingLeft:10},children:"To:"}),Object(m.jsx)(T.a,{showSearch:!0,addonBefore:"To",style:{width:300,padding:10},placeholder:"Arrival Airport",value:f,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:le,onChange:ce(x),notFoundContent:null,allowClear:!0,children:se}),"view"===s?Object(m.jsx)(l,{onChange:function(){ce(A),ce(D)},picker:"day",style:{width:200},placeholder:["Begin With","End With"]}):Object(m.jsx)(F.a,{format:C,onChange:ce(A),style:{width:200},placeholder:"Depate After"}),Object(m.jsx)("span",{style:{padding:10},children:" "}),Object(m.jsx)(c.a,{type:"primary",onClick:"view"===s?function(){var e=null;console.log("xixi"),e=""===k&&""===P?w.a.stringify({sourceAirport:u,destAirport:f,email:"abababababa@gmail.com"}):w.a.stringify({sourceAirport:u,destAirport:f,email:"abababababa@gmail.com",startDate:new Date(k),endDate:new Date(P)}),I()({url:"customer"===t?"http://localhost:8080/customer/getMyFlights":"http://localhost:8080/bookingAgent/getMyFlights",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},data:e}).then((function(e){e.data&&(console.log(e.data),n(e.data))})).catch((function(e){console.log("\u51fa\u9519\u4e86")}))}:"purchase"===s?function(){console.log("xixi"),I()({url:"http://localhost:8080/bookingAgent/getAllAvailableFlights",method:"POST",data:{}}).then((function(e){e.data?(console.log(e.data),n(e.data)):console.log("No Results")}))}:function(){console.log("xixi"),I()({url:"http://localhost:8080/index/searchFlights",method:"POST",data:{sourceAirportName:u,destAirportName:f,departureTime:k}}).then((function(e){e.data?(console.log(e.data),n(e.data)):console.log("No Results")})).catch((function(e){console.log("haha")}))},children:"Search"})]}),"purchase"===a&&Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:"Or use exact searching:"}),Object(m.jsx)(g.a,{addonBefore:"Flight Number",placeholder:"Airline Code + Digits",value:B,allowClear:!0,maxLength:6,style:{width:"50vw"}}),Object(m.jsx)("b",{style:{padding:10},children:" "})]}),Object(m.jsx)(J.a,{}),r?Object(m.jsx)(re,{data:r,userType:t,actionType:s,setRowRecord:G,setAgentModalVis:W,setCustomerModalVis:ee}):null,L?Object(m.jsx)(ae,{agentModalVis:H,setAgentModalVis:W,rowRecord:L,setRowRecord:G}):null,L?Object(m.jsx)(te,{customerModalVis:Q,setCustomerModalVis:ee,rowRecord:L,setRowRecord:G}):null]})}T.a.Option;var se=a(1170);function le(){var e=Object(i.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(ee()().subtract(30,"days")),s=Object(h.a)(n,2),l=s[0],c=s[1],o=Object(i.useState)(ee()()),d=Object(h.a)(o,2),u=d[0],j=d[1];Object(i.useEffect)((function(){I()({url:"http://localhost:8080/customer/trackSpending",method:"POST",data:{startDate:l,endDate:u,email:"12345@qq.com"}}).then((function(e){if(e.data){console.log(e.data);var t=e.data.map((function(e){return{type:e.timestamp,value:e.value}}));r(t)}}))}),[]);var b=function(e,t){var a=0,i=0;"start"==t?(a=e,i=u):(a=l,i=e),I()({url:"http://localhost:8080/customer/trackSpending",method:"POST",data:{startDate:a,endDate:i,email:"12345@qq.com"}}).then((function(e){if(e.data.length>0){console.log(e.data);var n=e.data.map((function(e){return{type:e.timestamp,value:e.value}}));r(n),"start"==t?function(e){c(e)}(a):function(e){j(e)}(i)}else r([{item:"9",value:9999}])}))},f={appendPadding:10,data:a,angleField:"value",colorField:"type",radius:.9,meta:{type:{alias:"Month"},value:{alias:"Total Spending",formatter:function(e){return"$"+e.toString()}}},label:{type:"inner",offset:"-30%"}};return Object(m.jsxs)(O.a,{title:"See your amazing trips, Username!",children:[Object(m.jsxs)(g.a.Group,{children:[Object(m.jsx)(F.a,{format:C,placeholder:"startDate",defaultValue:l,onChange:function(e){b(e,"start")},style:{width:200}}),Object(m.jsx)("b",{style:{padding:190},children:" "}),Object(m.jsx)(F.a,{format:C,placeholder:"endDate",defaultValue:u,onChange:function(e){b(e,"end")},style:{width:200}}),Object(m.jsx)("b",{style:{padding:160},children:" "})]}),Object(m.jsx)(se.a,Object(p.a)({},f))]})}var ce=R.a.SubMenu;function oe(e){var t=e.loginInfo,a=e.updateSelection,r=(e.defaultData,e.setActionType),n=e.setFlightResult,s={1:"Search flights",2:"Create order",3:"My customer orders",4:"Commission statistics",5:"Top customers",6:"Logout"},l=Object(v.f)(),c={1:"search",2:"purchase",3:"view"};return Object(i.useEffect)((function(){a("Commission statistics")}),[]),Object(m.jsxs)(R.a,{mode:"inline",defaultSelectedKeys:["4"],defaultOpenKeys:["sub2"],onClick:function(e){"Logout"==s[e.key]&&(t.current=null,l("/",{replace:!0})),a(s[e.key]),n(null),r(c[e.key])},style:{height:"100%",borderRight:0},children:[Object(m.jsxs)(ce,{icon:Object(m.jsx)(Y.a,{}),title:"Booking",children:[Object(m.jsx)(R.a.Item,{children:s[1]},"1"),Object(m.jsx)(R.a.Item,{children:s[2]},"2")]},"sub1"),Object(m.jsxs)(ce,{icon:Object(m.jsx)(x.a,{}),title:"Mine",children:[Object(m.jsx)(R.a.Item,{children:s[3]},"3"),Object(m.jsx)(R.a.Item,{children:s[4]},"4"),Object(m.jsx)(R.a.Item,{children:s[5]},"5")]},"sub2"),Object(m.jsx)(ce,{icon:Object(m.jsx)(B.a,{}),title:"Operation",children:Object(m.jsx)(R.a.Item,{children:s[6]},"6")},"sub3")]})}var de=a(1172),ue=a(171),me=a(654);l.a.Title;function je(){var e=Object(i.useState)(null),t=Object(h.a)(e,2),a=(t[0],t[1],Object(i.useState)(null)),r=Object(h.a)(a,2),n=(r[0],r[1],Object(i.useState)("tickets")),s=Object(h.a)(n,2),l=s[0],c=s[1],o=Object(i.useState)([]),d=Object(h.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)(5),f=Object(h.a)(b,2),g=f[0],x=f[1];Object(me.useEffect)((function(){y()}),[]);var y=function(){I()({method:"GET",url:"http://localhost:8080/bookingAgent/getTopKTickets",params:{K:g}}).then((function(e){if(e.data){var t=e.data.map((function(e){return{email:e.email,sum:e.ticketsFromAgent}}));j(t)}}))};return Object(m.jsx)(O.a,{title:"Customer Statistics",tabList:[{key:"tickets",tab:"Tickets Ranking"},{key:"commission",tab:"Commission Ranking"}],activeTab:l,onTabChange:function(e){c(e),"tickets"===e?y():I()({method:"GET",url:"http://localhost:8080/bookingAgent/getTopKCommission",params:{K:g}}).then((function(e){if(e.data){console.log(e.data);var t=e.data.map((function(e){return{email:e.email,sum:e.totalCommission}}));j(t)}}))},tabBarExtraContent:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{style:{marginRight:5},children:"Top"}),Object(m.jsx)(ue.a,{min:1,onChange:function(e){x(e)},defaultValue:5}),Object(m.jsx)("span",{style:{marginLeft:5},children:"Agents"})]}),children:Object(m.jsx)(de.a,Object(p.a)(Object(p.a)({},{xField:"email",yField:"sum",seriesField:"",columnWidthRatio:.5,label:{position:"middle",style:{fill:"#FFFFFF",opacity:.8}},xAxis:{label:{autoHide:!0,autoRotate:!1}}}),{},{data:u.slice(0,g),meta:{uid:{alias:"User ID"},sum:{alias:"tickets"===l?"Ticket Number":"Total Commission"}}}))})}var be=a(1176);I.a.defaults.timeout=1e3;var pe=F.a.RangePicker;function he(){var e=Object(i.useState)(null),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(null),s=Object(h.a)(n,2),l=s[0],c=s[1],o=Object(i.useState)(null),d=Object(h.a)(o,2),u=d[0],j=d[1],b=Boolean(a),p=Boolean(l),f=Boolean(u);return Object(i.useEffect)((function(){I()({url:"http://localhost:8080/bookingAgent/getCommissionInfo",method:"GET",params:{email:"cathayEmp01@csair.com",startDate:new Date(ee()().subtract(30,"days")),endDate:new Date(ee()())}}).then((function(e){e.data&&(console.log(e.data),r(e.data.commissionFees),c(e.data.averageCommissionFees),j(e.data.ticketBooked))}))}),[]),Object(m.jsx)(O.a,{title:"Checking Total Commission for Username",children:Object(m.jsxs)(H.b,{direction:"vertical",size:"large",style:{width:"100%"},children:[Object(m.jsx)(pe,{onChange:function(e,t){console.log(e),I()({url:"http://localhost:8080/bookingAgent/getCommissionInfo",method:"GET",params:{email:"cathayEmp01@csair.com",startDate:new Date(e[0]),endDate:new Date(e[1])}}).then((function(e){e.data&&(console.log(e.data),r(e.data.commissionFees),c(e.data.averageCommissionFees),j(e.data.ticketBooked))})).catch((function(){r(99999),c(90909),j(12313213)}))},defaultValue:[ee()().subtract(30,"days"),ee()()]}),Object(m.jsxs)("div",{style:{textAlign:"center",width:"100%"},children:[Object(m.jsx)(be.a,{title:"Total Commission in (USD)",value:a,loading:!b,precision:2,style:{width:"100%"}}),Object(m.jsx)(be.a,{title:"Average Commission in (USD)",value:l,loading:!p,precision:2,style:{width:"100%"}}),Object(m.jsx)(be.a,{title:"Total Tickets Booked On Behalf of the customer",value:u,loading:!f,style:{width:"100%"}})]})]})})}var fe=a(1187),Oe=a(1188),ge=a(61),xe=R.a.SubMenu;function ye(e){var t=e.loginInfo,a=e.updateSelection,r={2:"Flight CRUD",4:"Add airplane",5:"Add airport",3:"View Agents",6:"Frequent customers",7:"Revenue Comparison",8:"Top destinations",9:"View Reports",10:"Add booking agent",11:"Grant permission",12:"Logout"},n=Object(v.f)(),s={permission:["Admin","Operator"]};return Object(i.useEffect)((function(){a("View Reports")}),[]),Object(m.jsxs)(R.a,{mode:"inline",defaultSelectedKeys:["9"],defaultOpenKeys:["sub2"],onClick:function(e){"Logout"==r[e.key]&&(t.current=null,n("/",{replace:!0})),a(r[e.key])},style:{height:"100%",borderRight:0},children:[Object(m.jsxs)(xe,{icon:Object(m.jsx)(fe.a,{}),title:"Flight Management",children:[Object(m.jsx)(R.a.Item,{children:r[2]},"2"),Object(m.jsx)(R.a.Item,{disabled:!s.permission.includes("Admin"),children:Object(m.jsx)(ge.a,{title:s.permission.includes("Admin")?void 0:"Insufficient Privileges!",color:"orange",children:r[4]})},"4"),Object(m.jsx)(R.a.Item,{disabled:!s.permission.includes("Admin"),children:Object(m.jsx)(ge.a,{title:s.permission.includes("Admin")?void 0:"Insufficient Privileges!",color:"orange",children:r[5]})},"5")]},"sub1"),Object(m.jsxs)(xe,{icon:Object(m.jsx)(Oe.a,{}),title:"Statistics",children:[Object(m.jsx)(R.a.Item,{children:r[3]},"3"),Object(m.jsx)(R.a.Item,{children:r[6]},"6"),Object(m.jsx)(R.a.Item,{children:r[7]},"7"),Object(m.jsx)(R.a.Item,{children:r[8]},"8"),Object(m.jsx)(R.a.Item,{children:r[9]},"9")]},"sub2"),Object(m.jsxs)(xe,{icon:Object(m.jsx)(B.a,{}),title:"Operation",children:[Object(m.jsx)(R.a.Item,{disabled:!s.permission.includes("Admin"),children:Object(m.jsx)(ge.a,{title:s.permission.includes("Admin")?void 0:"Insufficient Privileges!",color:"orange",children:r[10]})},"10"),Object(m.jsx)(R.a.Item,{disabled:!s.permission.includes("Admin"),children:Object(m.jsx)(ge.a,{title:s.permission.includes("Admin")?void 0:"Insufficient Privileges!",color:"orange",children:r[11]})},"11"),Object(m.jsx)(R.a.Item,{children:r[12]},"12")]},"sub3")]})}var ve=a(283);function ke(e){e.loginInfo;var t=f.a.useForm(),a=Object(h.a)(t,1)[0];return Object(m.jsx)(O.a,{title:"Airport Information Management",children:Object(m.jsxs)(f.a,{form:a,name:"airport form",className:"airport_form",onFinish:function(e){console.log(e),I()({url:"http://localhost:8080/airlineStaff/addNewAirport",method:"post",data:e}).then((function(e){"success"===e.data?ve.b.success({content:"Insertion Completed",className:"custom-class",style:{marginTop:"40vh"}}):ve.b.error({content:"You have already inserted this airport!",className:"custom-class",style:{marginTop:"40vh"}})}))},onFinishFailed:function(){console.log("xixi")},scrollToFirstError:!0,children:[Object(m.jsx)(f.a.Item,{name:"airportName",label:"Airport Name",rules:[{required:!0,message:"Airport Name should not be empty!"}],validateTrigger:"onBlur",hasFeedback:!0,children:Object(m.jsx)(g.a,{})}),Object(m.jsx)(f.a.Item,{name:"airportCity",label:"Airport City",validateTrigger:"onBlur",rules:[{required:!0,message:"Airport City should not be empty!"}],hasFeedback:!0,children:Object(m.jsx)(g.a,{})}),Object(m.jsxs)(f.a.Item,Object(p.a)(Object(p.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"Add"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){a.resetFields()},children:"Reset"})]}))]})})}function Ie(e){e.loginInfo;var t=f.a.useForm(),a=Object(h.a)(t,1)[0];return Object(m.jsx)(O.a,{title:"Airplane Information Management",children:Object(m.jsxs)(f.a,{form:a,name:"airplane",className:"airplane-form",onFinish:function(e){console.log(e),I()({url:"http://localhost:8080/airlineStaff/addNewAirplane",method:"post",data:{airline:e.airlineName,id:e.airplaneId,seats:e.seats}}).then((function(e){"success"===e.data?ve.b.success({content:"Insertion Completed",className:"custom-class",style:{marginTop:"40vh"}}):ve.b.error({content:"You have already inserted this airplane information!",className:"custom-class",style:{marginTop:"40vh"}})}))},onFinishedFailed:function(){console.log("\u9a8c\u8bc1\u5931\u8d25")},children:[Object(m.jsx)(f.a.Item,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Aiport Name should not be empty!"}],children:Object(m.jsx)(g.a,{})}),Object(m.jsx)(f.a.Item,{name:"airplaneId",label:"Airplane Id",rules:[{required:!0,message:"Aiport Id should not be empty!"}],children:Object(m.jsx)(g.a,{})}),Object(m.jsx)(f.a.Item,{name:"seats",label:"Seat Number",children:Object(m.jsx)(ue.a,{defaultValue:200})}),Object(m.jsxs)(f.a.Item,Object(p.a)(Object(p.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:[Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"Add"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){a.resetFields()},children:"Reset"})]}))]})})}var Ae=R.a.SubMenu;function Ce(e){var t=e.updateSelection,a={1:"Search flights",2:"Exit the System"},r=Object(v.f)();return Object(i.useEffect)((function(){t("Search flights")}),[]),Object(m.jsx)(R.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],onClick:function(e){"Exit the System"==a[e.key]&&r("/",{replace:!0}),t(a[e.key])},style:{height:"100%",borderRight:0},children:Object(m.jsxs)(Ae,{icon:Object(m.jsx)(Y.a,{}),title:"Operation",children:[Object(m.jsx)(R.a.Item,{children:a[1]},"1"),Object(m.jsx)(R.a.Item,{children:a[2]},"2")]},"sub1")})}var Se=a(28),we=a.n(Se),Te=a(149),Fe=a(663),Ne=a(1178),Pe=a(677),De=a(657),Re={labelCol:{span:7},wrapperCol:{span:13}},Me=f.a.Item,Ve=T.a.Option;function _e(e){var t=e.modalVisible,a=e.onCancel,r=(e.onSubmit,e.handleCreateModalVisible),n=e.handleCreate,s=Object(i.useState)({}),l=Object(h.a)(s,2),o=l[0],d=l[1],u=f.a.useForm(),j=Object(h.a)(u,1)[0],b=function(e){return e&&e<ee()().endOf("day")},O=["upcoming","finished","cancelled","onBoarding","delayed"].map((function(e){return Object(m.jsx)(Ve,{children:e},e)})),x=function(){var e=Object(Te.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.validateFields();case 2:t=e.sent,I()({url:"http://localhost:8080/airlineStaff/validateNewAirplane",method:"POST",data:{id:t.airplaneId,airline:t.airlineName}}).then((function(e){"success"===e.data?(d(Object(p.a)(Object(p.a)({},o),t)),n(Object(p.a)(Object(p.a)({},o),t))):ve.b.error({content:"This airline name and airplane id is not found in the database!",className:"custom-class",style:{marginTop:"40vh"}})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Add Flight",visible:t,onCancel:function(){return a()},footer:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(c.a,{onClick:function(){return r(!1)},children:"Cancel"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){return x()},children:"Submit"})]}),children:Object(m.jsx)(f.a,Object(p.a)(Object(p.a)({},Re),{},{form:j,name:"flight",className:"flight-form",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Me,{name:"flightNum",label:"Flight Number",rules:[{required:!0,message:"Please input flight number!"}],children:Object(m.jsx)(g.a,{placeholder:"e.g. MU672"})}),Object(m.jsx)(Me,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Please input airline name"}],children:Object(m.jsx)(g.a,{placeholder:"e.g. Cathay Pacific"})}),Object(m.jsx)(Me,{name:"sourceAirportName",label:"Departure Airport",rules:[{required:!0,message:"Please Input Departure Airport"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("destAirportName")!==a?Promise.resolve():Promise.reject(new Error("The arrivalAirport should not be the same as the departure Airport!"))}}}],children:Object(m.jsx)(g.a,{placeholder:"e.g. PVG"})}),Object(m.jsx)(Me,{name:"departureTime",label:"Departure Time",rules:[{required:!0,message:"Please input Departure Time"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return console.log("xixi"),ee()(a)<ee()(t("arrivalTime"))?Promise.resolve():Promise.reject(new Error("You cannot set the departure time to be later than arrival time!"))}}}],children:Object(m.jsx)(F.a,{format:"YYYY-MM-DD HH:mm:ss",disabledDate:b,showTime:{defaultValue:ee()("00:00:00","HH:mm:ss")}})}),Object(m.jsx)(Me,{name:"destAirportName",label:"Arrival Airport",rules:[{required:!0,message:"Please Input Arrival Airport"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("sourceAirportName")!==a?Promise.resolve():Promise.reject(new Error("The arrival airport should not be the same as the departure airport!"))}}}],children:Object(m.jsx)(g.a,{placeholder:"e.g. SZX"})}),Object(m.jsx)(Me,{name:"arrivalTime",label:"Arrival Time",rules:[{required:!0,message:"Please input Arrival Time"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return ee()(a)>ee()(t("departureTime"))?Promise.resolve():Promise.reject(new Error("You cannot set the arrival time to be earlier than  the departure time!"))}}}],children:Object(m.jsx)(F.a,{format:"YYYY-MM-DD HH:mm:ss",disabledDate:b,showTime:{defaultValue:ee()("00:00:00","HH:mm:ss")}})}),Object(m.jsx)(Me,{name:"price",label:"price",rules:[{required:!0,message:"Please indicate the price of this flight!"}],children:Object(m.jsx)(ue.a,{min:1,max:999999999,precision:2,style:{width:130}})}),Object(m.jsx)(Me,{name:"status",label:"status",rules:[{required:!0,message:"Please select the status of this flight!"}],children:Object(m.jsx)(T.a,{children:O})}),Object(m.jsx)(Me,{name:"airplaneId",label:"Airplane Id",rules:[{required:!0,message:"Please select the airplane id for this flight!"}],children:Object(m.jsx)(g.a,{placeholder:"e.g. A380"})})]})}))})}var Ee=f.a.Item,qe={labelCol:{span:7},wrapperCol:{span:13}};function Be(e){e.onCancel,e.onSubmit;var t=e.updateModalVisible,a=e.handleUpdateModalVisible,r=e.values,n=e.handleUpdate,s=f.a.useForm(),l=Object(h.a)(s,1)[0],o=Object(i.useState)(Object(p.a)({},e.values)),d=Object(h.a)(o,2),u=d[0],j=d[1],b=function(){var e=Object(Te.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.validateFields();case 2:t=e.sent,j(Object(p.a)(Object(p.a)({},u),t)),n(Object(p.a)(Object(p.a)({},u),t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(M.a,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"Update Flight",visible:t,footer:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(c.a,{onClick:function(){return a(!1,r)},children:"\u53d6\u6d88"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){return b()},children:"\u63d0\u4ea4"})]}),onCancel:function(){return a()},children:Object(m.jsx)(f.a,Object(p.a)(Object(p.a)({},qe),{},{form:l,initialValues:{flightNum:u.flightNum,airlineName:u.airlineName,sourceAirportName:u.sourceAirportName,destAirportName:u.destAirportName,price:u.price,status:u.status},children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ee,{name:"flightNum",label:"Flight Number",rules:[{required:!0,message:"Please input flight number!"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(Ee,{name:"airlineName",label:"Airline Name",rules:[{required:!0,message:"Please input airline name!"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(Ee,{name:"sourceAirportName",label:"Departure Airport",rules:[{required:!0,message:"Please Input Departure Airport"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(Ee,{name:"destAirportName",label:"Arrival Airport",rules:[{required:!0,message:"Please input  Arrival Airport"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(Ee,{name:"price",label:"price",rules:[{required:!0,message:"Please input the price"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})}),Object(m.jsx)(Ee,{name:"status",label:"status",rules:[{required:!0,message:"Please input the status"}],children:Object(m.jsx)(g.a,{placeholder:"\u8bf7\u8f93\u5165"})})]})}))})}function Ye(e){var t=e.detailModalVisible,a=e.onCancel,i=(e.handleDetailModalVisible,e.values);console.log(i);var r=i.passengers;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Customer Details",visible:t,onCancel:function(){return a()},width:1300,footer:[],children:Object(m.jsx)(G.a,{scroll:{x:1300},columns:[{title:"Email",dataIndex:"email",key:"email",textWrap:"word-break",width:150,ellipsis:!0,fixed:"left"},{title:"Name",dataIndex:"name",key:"name",textWrap:"word-break",width:100,ellipsis:!0},{title:"Building Number",dataIndex:"buildingNumber",key:"building"},{title:"Street",dataIndex:"street",key:"street"},{title:"City",dataIndex:"city",key:"city"},{title:"State",dataIndex:"livingState",key:"state"},{title:"Phone No.",dataIndex:"phoneNumber",key:"phone",textWrap:"word-break",width:150,ellipsis:!0},{title:"Passport No.",dataIndex:"passportNumber",key:"passportnum"},{title:"Passport Exp.",dataIndex:"passportExpiration",key:"passportexp",textWrap:"word-break",width:100,ellipsis:!0},{title:"Passport Country",dataIndex:"passportCountry",key:"passportCountry"},{title:"Birthday",dataIndex:"birthday",key:"birthday",textWrap:"word-break",width:100,ellipsis:!0}],dataSource:r})})})}function ze(e){var t=e.loginInfo,a=Object(i.useState)(!1),r=Object(h.a)(a,2),n=r[0],s=r[1],l=Object(i.useState)(!1),o=Object(h.a)(l,2),d=o[0],u=o[1],j=Object(i.useState)(!1),b=Object(h.a)(j,2),f=b[0],O=b[1],g=Object(i.useState)([]),x=Object(h.a)(g,2),y=x[0],v=x[1],k=Object(i.useState)({}),A=Object(h.a)(k,2),C=A[0],S=A[1],T=Object(i.useState)("read"),F=Object(h.a)(T,2),N=F[0],P=(F[1],Object(i.useState)([])),D=Object(h.a)(P,2),R=(D[0],D[1],Object(i.useRef)()),M=Object(i.useRef)(!0);console.log(t);var V={permission:["Admin","Operator"]};console.log(V.permission.includes("Admin"));var _=function(){var e=Object(Te.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I()({url:"http://localhost:8080/airlineStaff/findAllFlights",method:"GET"}).then((function(e){return e.data?(console.log(e.data),M.current=!1,{data:Object(p.a)({},e.data),success:!0}):{data:{},success:!1}})).catch((function(){return console.log("\u8fd4\u56de\u9ed8\u8ba4\u6570\u636e"),{data:q,success:!0}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(Te.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",I()({url:"http://localhost:8080/airlineStaff/findAllFilteredFlights",method:"POST",data:t}).then((function(e){return e.data?(console.log(e.data),{data:Object(p.a)({},e.data),success:!0}):{data:{},success:!1}})).catch((function(){return console.log("\u8fd4\u56de\u9ed8\u8ba4\u6570\u636e"),{data:q,success:!0}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q={records:[{flightNum:"MU12243234",airlineName:"Cathay Pacific",sourceAirportName:"PVG",departureTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),destAirportName:"SZX",arrivalTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),price:3030,status:"on time",airplaneId:"MU888"},{flightNum:"MU1224",airlineName:"Cathay Pacific",sourceAirportName:"PVG",departureTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),destAirportName:"SZX",arrivalTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),price:3030,status:"on time",airplaneId:"MU888"},{flightNum:"MU234",airlineName:"Cathay Pacific",sourceAirportName:"PVG",departureTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),destAirportName:"SZX",arrivalTime:ee()("2020-01-01").format("YYYY-MM-DD HH:mm:ss"),price:3030,status:"on time",airplaneId:"MU888"}],total:12,success:!0},B=function(e,t){I()({url:"http://localhost:8080/airlineStaff/deleteFlight",method:"POST",data:w.a.stringify({flightNum:e,airlineName:t})}).then((function(e){e.data&&(R.current.reload(),ve.b.success("Click on Yes"))})).catch((function(e){ve.b.success("Delete Failed")}))},Y=function(e){console.log("update")},z=function(e){console.log(e),ve.b.error("Click on No")},L=[{title:"Flight Number",dataIndex:"flightNum",key:"flightNum",textWrap:"word-break",width:100,ellipsis:!0,fixed:"left"},{title:"Airline Name",dataIndex:"airlineName",textWrap:"word-break",width:100,ellipsis:!0,key:"airlineName"},{title:"Dept. Airport",dataIndex:"sourceAirportName",textWrap:"word-break",width:100,ellipsis:!0,key:"sourceAirportName"},{title:"Arri. Airport",dataIndex:"destAirportName",textWrap:"word-break",width:100,ellipsis:!0,key:"destAirportName"},{title:"Dept. Time",dataIndex:"departureTime",valueType:"dateTime",width:150,ellipsis:!0,key:"departureTime"},{title:"Arri. Time",dataIndex:"arrivalTime",valueType:"dateTime",key:"arrivalTime",width:150,ellipsis:!0},{title:"Price",dataIndex:"price",hideInSearch:!0,key:"price",textWrap:"word-break",width:100,ellipsis:!0},{title:"Airplane ID",dataIndex:"airplaneId",hideInSearch:!0,key:"airplaneId",textWrap:"word-break",width:100,ellipsis:!0},{title:"Status",dataIndex:"status",hideInSearch:!0,key:"status",render:function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(K.a,{color:U[e],children:e.toUpperCase()},e)})}},{title:"Action",key:"action",hideInSearch:!0,fixed:"right",render:function(e,t){return Object(m.jsxs)(H.b,{size:"middle",children:[Object(m.jsx)(c.a,{onClick:function(){O(!0),S(t)},children:"Details"}),Object(m.jsx)(ge.a,{title:V.permission.includes("Operator")?void 0:"Insufficient Privileges!",color:"orange",children:Object(m.jsx)(c.a,{disabled:!V.permission.includes("Operator"),onClick:function(){u(!0),S(t)},type:"primary",size:"small",children:Object(m.jsx)(W.a,{style:{fontSize:"15px"}})})}),Object(m.jsx)(De.a,{title:"Are you sure to delete this row?",onConfirm:function(e){!function(e,t){B(t.flightNum,t.airlineName)}(0,t)},onCancel:z,okText:"Yes",cancelText:"No",children:Object(m.jsx)(ge.a,{title:V.permission.includes("Operator")?void 0:"Insufficient Privileges!",color:"orange",children:Object(m.jsx)(c.a,{disabled:!V.permission.includes("Operator"),onClick:function(){},type:"primary",size:"small",danger:!0,children:Object(m.jsx)(Z.a,{style:{fontSize:"15px"}})})})})]})}}],G=function(){var e=Object(Te.a)(we.a.mark((function e(t,a,i){var r,n,s,l,c,o,d,u;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=M.current){e.next=13;break}return console.log("\u8c03\u7528getData"),delete(r=Object(p.a)(Object(p.a)({},t),{},{pageIndex:t.current})).current,console.log("\u53d1\u8d77\u8bf7\u6c42"),e.next=7,_(r);case 7:return n=e.sent,s=n.data,l=n.success,e.abrupt("return",{data:s.records,success:l,total:s.total});case 13:return console.log(M),console.log("\u8c03\u7528getFilteredData"),delete(c=Object(p.a)(Object(p.a)({},t),{},{pageIndex:t.current})).current,console.log("\u53d1\u8d77\u8bf7\u6c42"),console.log(t),e.next=21,E(c);case 21:return o=e.sent,d=o.data,u=o.success,e.abrupt("return",{data:d.records,success:u,total:d.total});case 25:case"end":return e.stop()}}),e)})));return function(t,a,i){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{children:[Object(m.jsx)(Fe.a,{columns:L,actionRef:R,request:G,rowKey:function(e,t){return t},scroll:{y:300,x:1300},form:{span:8},size:"middle",rowSelection:{onchange:function(e,t){return v(t)}},toolBarRender:function(){return[Object(m.jsx)(ge.a,{title:V.permission.includes("Admin")?void 0:"Insufficient Privileges!",color:"orange",children:Object(m.jsxs)(c.a,{type:"primary",disabled:!V.permission.includes("Admin"),onClick:function(){s(!0)},children:[Object(m.jsx)(Pe.a,{}),"Add Flight"]},"3")})]}}),(null===y||void 0===y?void 0:y.length)>0&&Object(m.jsxs)(Ne.a,{extra:Object(m.jsxs)("div",{children:[Object(m.jsx)("a",{style:{fontWeight:600},children:y.length})," items choosed \xa0\xa0"]}),children:["read"===N&&Object(m.jsx)(c.a,{danger:!0,type:"primary",onClick:Object(Te.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(y);case 2:v([]),null===(t=R.current)||void 0===t||t.reloadAndRest();case 4:case"end":return e.stop()}}),e)}))),children:"\u6279\u91cf\u5220\u9664"}),"upload"===N&&Object(m.jsx)(c.a,{type:"primary",onClick:Object(Te.a)(we.a.mark((function e(){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void(e.next=2);case 2:v([]);case 3:case"end":return e.stop()}}),e)}))),children:"\u6279\u91cf\u65b0\u589e"})]}),Object(m.jsx)(_e,{onSubmit:function(){var e=Object(Te.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:e.sent&&(u(!1),S({}),R.current&&R.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){return s(!1)},modalVisible:n,handleCreateModalVisible:s,handleCreate:function(e){I()({url:"http://localhost:8080/airlineStaff/addNewFlight",method:"post",data:Object(p.a)(Object(p.a)({},e),{},{departureTime:new Date(ee()(e.departureTime)),arrivalTime:new Date(ee()(e.arrivalTime))})}).then((function(e){"success"===e.data?(ve.b.success({content:"Insertion Completed",className:"custom-class",style:{marginTop:"40vh"}}),s(!1),R.current.reload()):ve.b.error({content:"You have already inserted this airplane information!",className:"custom-class",style:{marginTop:"40vh"}})}))},className:"createForm"}),C&&Object.keys(C).length?Object(m.jsx)(Be,{className:"updateForm",onSubmit:function(){var e=Object(Te.a)(we.a.mark((function e(t){return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:e.sent&&(u(!1),S({}),R.current&&R.current.reload());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onCancel:function(){u(!1),S({})},handleUpdateModalVisible:u,updateModalVisible:d,values:C,handleUpdate:Y}):null,C&&Object.keys(C).length?Object(m.jsx)(Ye,{className:"DetailForm",handleDetailModalVisible:O,detailModalVisible:f,onCancel:function(){O(!1),S({})},values:C}):null]})}var Le=a(121),Ge=a(1174);function Ue(){var e=Object(i.useState)("sales"),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)("year"),s=Object(h.a)(n,2),l=s[0],o=s[1],d=Object(i.useState)(5),u=Object(h.a)(d,2),j=u[0],b=u[1],f=Object(i.useState)(null),g=Object(h.a)(f,2),x=g[0],y=g[1];console.log(l);var v=[{type:"22@23.com",sales:34},{type:"22@25.com",sales:38},{type:"aa@23.com",sales:30},{type:"s2a@43.com",sales:12},{type:"12@23.com",sales:56}];Object(i.useEffect)((function(){A()}),[]);var k=[{type:"22@23.com",commission:340},{type:"22@25.com",commission:380},{type:"aa@23.com",commission:100},{type:"s2a@43.com",commission:120},{type:"12@23.com",commission:560}],A=function(){I.a.get("http://localhost:8080/airlineStaff/getTopK",{params:{type:"sales",K:j,past:l},timeout:1e3}).then((function(e){if(e.data){console.log(e.data);var t=e.data.map((function(e){return{type:e.email,sales:e.totalSales}}));y(t)}})).catch((function(e){ve.b.error("\u8bf7\u6c42\u8d85\u65f6,\u52a0\u8f7d\u9ed8\u8ba4\u6570\u636e"),y(v)}))},C={data:x?x.slice(0,j):null,xField:"sales"===a?"sales":"commission",yField:"type",legend:{position:"top-left"},barBackground:{style:{fill:"rgba(0,0,0,0.1)"}},interactions:[{type:"active-region",enable:!1}]};return Object(m.jsxs)(O.a,{tabList:[{key:"sales",tab:"Sales Ranking"},{key:"commission",tab:"Commission Ranking"}],activeTab:a,onTabChange:function(e){r(e),"sales"===e?(y(null),A()):(y(null),I.a.get("http://localhost:8080/airlineStaff/getTopK",{params:{type:"commission",K:j,past:l}}).then((function(e){if(e.data){var t=e.data.map((function(e){return{type:e.email,commission:e.commissionFees}}));console.log(t),y(t)}})).catch((function(e){y(k)})))},tabBarExtraContent:Object(m.jsxs)(m.Fragment,{children:["sales"===a&&Object(m.jsxs)(H.b,{children:[Object(m.jsx)(c.a,{type:"primary",onClick:function(){o("month")},children:"Past Month"}),Object(m.jsx)(c.a,{type:"primary",onClick:function(){o("year")},children:"Past Year"})]}),Object(m.jsxs)(H.b,{children:[Object(m.jsx)("span",{style:{marginRight:5,marginLeft:10},children:"Top"}),Object(m.jsx)(ue.a,{addonBefore:"+",addonAfter:"$",min:1,onChange:function(e){b(e)},defaultValue:5}),Object(m.jsx)("span",{style:{marginLeft:5},children:"Agents"})]})]}),hoverable:!0,children:[!x&&Object(m.jsx)(Le.a,{size:"large"}),x&&Object(m.jsx)(Ge.a,Object(p.a)(Object(p.a)({},C),{},{sort:!0,onReady:function(e){e.chart.on("element:click",(function(e){}))}}))]})}function Ke(){var e=Object(i.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(void 0),s=Object(h.a)(n,2),l=s[0],o=s[1],d=Object(i.useRef)("year"),u=Object(i.useRef)([]),j=(Boolean(l),F.a.RangePicker);Object(i.useEffect)((function(){b("Spring Airlines",null,null)}),[]);var b=function(e,t,a){console.log(t),console.log(a),I.a.get("http://localhost:8080/airlineStaff/viewReports",{params:{airlineName:"Spring Airlines",startDate:t?new Date(t):null,endDate:a?new Date(a):null}}).then((function(e){ve.b.success("\u6570\u636e\u52a0\u8f7d\u6210\u529f"),console.log(e.data);var t=e.data.map((function(e){return{type:e.interval,sales:e.value}})),a=t.reduce(f,0);console.log(a),u.current=t,r(t),o(a)})).catch((function(){ve.b.error("\u8bbf\u95ee\u8d85\u65f6\uff0c\u4f7f\u7528\u9ed8\u8ba4\u6570\u636e"),u.current=g,r(g)}))},f=function(e,t){return e+t.sales},g=[{type:"\u5bb6\u5177\u5bb6\u7535",sales:38},{type:"\u7cae\u6cb9\u526f\u98df",sales:52},{type:"\u751f\u9c9c\u6c34\u679c",sales:61},{type:"\u7f8e\u5bb9\u6d17\u62a4",sales:145},{type:"\u6bcd\u5a74\u7528\u54c1",sales:48},{type:"\u8fdb\u53e3\u98df\u54c1",sales:38},{type:"\u98df\u54c1\u996e\u6599",sales:38},{type:"\u5bb6\u5ead\u6e05\u6d01",sales:38}],x={data:a,xField:"type",yField:"sales",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{type:{alias:"\u7c7b\u522b"},sales:{alias:"\u9500\u552e\u989d"}}},y=function(){var e=u.current,t=e.reduce(f,0);r(e),o(t)},v=function(){var e=u.current.slice(-1);r(e),o(e.sales)},k=function(e){null!=e&&b("",e[0],e[1])};return Object(m.jsxs)(O.a,{title:"Here is the sales report for the airline you work in.",tabList:[{key:"sales",tab:"Sales Report"}],hoverable:!0,tabBarExtraContent:Object(m.jsxs)(H.b,{direction:"horizontal",size:12,children:[Object(m.jsx)(c.a,{onClick:y,type:"primary",children:"Last Year"}),Object(m.jsx)(c.a,{onClick:v,type:"primary",children:"Last Month"}),Object(m.jsx)(j,{picker:"month",onChange:k})]}),children:[Object(m.jsx)(be.a,{title:"Total Number of sold tickets over the last "+d.current,value:l,precision:2,style:{width:"100%"}}),Object(m.jsx)(de.a,Object(p.a)({},x))]})}function He(){var e=Object(i.useState)([]),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(void 0),s=Object(h.a)(n,2),l=(s[0],s[1],Object(i.useState)(void 0)),o=Object(h.a)(l,2),d=(o[0],o[1],Object(i.useRef)("year"));F.a.RangePicker;Object(i.useEffect)((function(){u("year")}),[]);var u=function(e){I.a.get("http://localhost:8080/airlineStaff/topDestinations",{params:{past:e}}).then((function(e){ve.b.success("\u6570\u636e\u52a0\u8f7d\u6210\u529f"),console.log(e.data);var t=e.data.map((function(e){return{type:e.type,value:e.value}}));console.log(t),r(t)})).catch((function(){ve.b.error("\u8bbf\u95ee\u8d85\u65f6\uff0c\u4f7f\u7528\u9ed8\u8ba4\u6570\u636e"),r(j)}))},j=[{type:"\u5bb6\u5177\u5bb6\u7535",value:38},{type:"\u7cae\u6cb9\u526f\u98df",value:52},{type:"\u751f\u9c9c\u6c34\u679c",value:61},{type:"\u7f8e\u5bb9\u6d17\u62a4",value:145},{type:"\u6bcd\u5a74\u7528\u54c1",value:48},{type:"\u8fdb\u53e3\u98df\u54c1",value:38},{type:"\u98df\u54c1\u996e\u6599",value:38},{type:"\u5bb6\u5ead\u6e05\u6d01",value:38}],b={data:a,xField:"type",yField:"value",label:{position:"middle",style:{fill:"#FFFFFF",opacity:.6}},xAxis:{label:{autoHide:!0,autoRotate:!1}},meta:{type:{alias:"\u7c7b\u522b"},sales:{alias:"\u9500\u552e\u989d"}}},f=function(){d.current="year",u("year")},g=function(){d.current="3 months",u("month")};return Object(m.jsx)(O.a,{title:"Top Destinations in the last"+d.current,tabList:[{key:"sales",tab:"Sales Report"}],hoverable:!0,tabBarExtraContent:Object(m.jsxs)(H.b,{direction:"horizontal",size:12,children:[Object(m.jsx)(c.a,{onClick:f,type:"primary",children:"Last Year"}),Object(m.jsx)(c.a,{onClick:g,type:"primary",children:"Last 3 Months"})]}),children:Object(m.jsx)(de.a,Object(p.a)({},b))})}function We(){var e=Object(i.useState)(null),t=Object(h.a)(e,2),a=t[0],r=t[1],n=Object(i.useState)(void 0),s=Object(h.a)(n,2),l=(s[0],s[1],Object(i.useState)(void 0)),o=Object(h.a)(l,2),d=(o[0],o[1],Object(i.useState)(void 0)),u=Object(h.a)(d,2),j=u[0],b=u[1],f=Object(i.useRef)("year");F.a.RangePicker;Object(i.useEffect)((function(){g("year","Spring Airlines")}),[]);var g=function(e,t){I.a.get("http://localhost:8080/airlineStaff/revenueComparison",{params:{past:e,airlineName:"Spring Airlines"}}).then((function(e){ve.b.success("\u6570\u636e\u52a0\u8f7d\u6210\u529f");var t=e.data.map((function(e){return{type:e.type,value:e.value}})),a=t.reduce(x,0);console.log(t),r(t),b(a)})).catch((function(){ve.b.error("\u8bbf\u95ee\u8d85\u65f6\uff0c\u4f7f\u7528\u9ed8\u8ba4\u6570\u636e"),console.log(y),r(y)}))},x=function(e,t){return e+t.value},y=[{type:"\u5206\u7c7b\u4e00",value:27},{type:"\u5206\u7c7b\u4e8c",value:25},{type:"\u5206\u7c7b\u4e09",value:18},{type:"\u5206\u7c7b\u56db",value:15},{type:"\u5206\u7c7b\u4e94",value:10},{type:"\u5176\u4ed6",value:5}],v={appendPadding:10,data:a,angleField:"value",colorField:"type",radius:.75,label:{type:"spider",labelHeight:28,content:"{name}\n{percentage}"},interactions:[{type:"element-selected"},{type:"element-active"}]},k=function(){f.current="year",g("year","Spring Airlines")},A=function(){f.current="month",g("month","Spring Airlines")},C=Boolean(a);return Object(m.jsxs)(O.a,{title:"Here is the brief report",tabList:[{key:"revenue",tab:"Revenue Comparison"}],hoverable:!0,tabBarExtraContent:Object(m.jsxs)(H.b,{direction:"horizontal",size:12,children:[Object(m.jsx)(c.a,{onClick:k,type:"primary",children:"Last Year"}),Object(m.jsx)(c.a,{onClick:A,type:"primary",children:"Last Month"})]}),children:[Object(m.jsx)(be.a,{title:"Total Sales in (USD) over the last "+f.current,value:j,loading:!C,precision:2,style:{width:"100%"}}),!a&&Object(m.jsx)(Le.a,{size:"large"}),a&&Object(m.jsx)(se.a,Object(p.a)({},v))]})}I.a.defaults.timeout=1e3,I.a.defaults.timeout=1e3;var Ze=a(676);I.a.defaults.timeout=1e3;F.a.RangePicker;function Xe(){var e=Object(i.useState)("sales"),t=Object(h.a)(e,2),a=(t[0],t[1],Object(i.useState)(10)),r=Object(h.a)(a,2),n=r[0],s=r[1],l=Object(i.useState)([]),c=Object(h.a)(l,2),o=c[0],d=c[1],u=Object(i.useRef)(null),j=Object(i.useState)(!1),b=Object(h.a)(j,2),f=b[0],g=b[1],x=Object(i.useState)(""),y=Object(h.a)(x,2),v=y[0],k=y[1],A=Object(i.useState)([]),C=Object(h.a)(A,2),S=C[0],w=C[1],T=[{customer:"22@23.com",tickets:2},{customer:"22@25.com",tickets:8},{customer:"aa@23.com",tickets:3},{customer:"s2a@43.com",tickets:12},{customer:"12@23.com",tickets:5}],F=[{key:"1",flight_id:"MA1234",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"2",flight_id:"MH3455",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"3",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"4",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"5",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"6",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"7",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"8",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"9",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"10",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"11",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]},{key:"12",flight_id:"MK5888",airline:"Cathay Pacific",dept_time:"2020-03-03",arri_time:"2021-01-01",price:9090,dept:"PVG",arri:"SZX",status:["on time"]}],N=[{title:"Flight Number",dataIndex:"flight_id",key:"flight_id"},{title:"Airline",dataIndex:"airline",key:"airline"},{title:"Dept. Time",dataIndex:"dept_time",key:"dept_time"},{title:"Arri. Time",dataIndex:"arri_time",key:"arri_time"},{title:"Dept. Airport",dataIndex:"dept",key:"dept"},{title:"Arri. Airport",dataIndex:"arri",key:"arri"},{title:"Price",dataIndex:"price",key:"price"},{title:"Status",dataIndex:"status",key:"status",render:function(e){return Object(m.jsx)(m.Fragment,{children:e.map((function(e){return Object(m.jsx)(K.a,{color:U[e],children:e.toUpperCase()},e)}))})}}];Object(i.useEffect)((function(){D()}),[]);var P=function(e){s(e)},D=function(){I.a.get("http://localhost:8080/airlineStaff/getTopKCustomers",{params:{K:n,airlineName:null}}).then((function(e){if(e.data){u.current=e.data;var t=R();console.log(u.current),ve.b.success("\u6570\u636e\u83b7\u53d6\u6210\u529f,\u6e32\u67d3\u5b8c\u6bd5"),d(t)}})).catch((function(e){d(T),w(F),ve.b.error("\u6570\u636e\u83b7\u53d6\u5931\u8d25,\u4f7f\u7528\u9ed8\u8ba4\u6570\u636e")}))},R=function(e,t){return u.current.map((function(e){return{customer:e.email,tickets:e.ticketsTotal}}))},V={data:o?o.slice(0,n):[],xField:"tickets",yField:"customer",legend:{position:"top-left"},barBackground:{style:{fill:"rgba(0,0,0,0.1)"}},interactions:[{type:"active-region",enable:!1}],meta:{type:{alias:"Customer Email"},tickets:{alias:"Number of Tickets Bought"}}},_=function(e){console.log(e);var t=function(e){if(null===u.current)return F;var t=u.current.filter((function(t){return t.email===e}))[0];return 0==t.length?[]:t.takenFlights.map((function(e){return{key:[e.flightNum,e.airlineName],flight_id:e.flightNum,airline:e.airlineName,dept_time:e.departureTime,arri_time:e.arrivalTime,dept:e.sourceAirportName,arri:e.destAirportName,price:e.price,status:[e.status]}}))}(e.data.data.customer);w(t),k(e.data.data.customer),g(!0)};return Object(m.jsxs)(O.a,{tabList:[{key:"customer",tab:"Most Frequent Customers"}],tabBarExtraContent:Object(m.jsxs)(H.b,{direction:"horizontal",size:10,children:[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{style:{marginRight:2},children:"Top"}),Object(m.jsx)(ue.a,{min:1,onChange:P,defaultValue:5}),Object(m.jsx)("span",{style:{marginLeft:2},children:"Agents"})]}),Object(m.jsx)(ge.a,{placement:"topLeft",title:"Click the bar to check the flights taken",children:Object(m.jsx)(Ze.a,{})})]}),hoverable:!0,children:[!o&&Object(m.jsx)(Le.a,{size:"large"}),o&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ge.a,Object(p.a)(Object(p.a)({},V),{},{sort:!0,onReady:function(e){e.chart.on("element:click",_)}})),Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Flight Taken with "+v,visible:f,onCancel:function(){g(!1)},width:900,children:Object(m.jsx)(O.a,{children:Object(m.jsx)(G.a,{columns:N,dataSource:S,size:"middle"})})})]})]})}g.a.Search;var Je=T.a.Option;function $e(e){e.loginInfo;var t=Object(i.useState)(void 0),a=Object(h.a)(t,2),r=(a[0],a[1],Object(i.useState)([])),n=Object(h.a)(r,2),s=n[0],l=(n[1],Object(v.f)(),s.map((function(e,t){return Object(m.jsx)(Je,{children:e},t)})),f.a.useForm()),o=Object(h.a)(l,1)[0];return Object(m.jsx)(O.a,{title:"Add Booking Agents",children:Object(m.jsxs)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{form:o,name:"Add Agents",onFinish:function(e){I.a.post("http://localhost:8080/airlineStaff/addBookingAgent",w.a.stringify(Object(p.a)(Object(p.a)({},e),{},{airlineName:"Spring Airlines"}))).then((function(e){if(e.data)if(!0===e.data.success)ve.b.success("Addition Succeeded!");else{var t=e.data;t&&(!1===t.emailValid?o.setFields([{name:"email",errors:["BookingAgent Not Found!"]}]):!1===t.workingValid&&o.setFields([{name:"email",errors:["BookingAgent has already been assigned this airline!"]}]))}}))},scrollToFirstError:!0,children:[Object(m.jsx)(f.a.Item,{name:"email",label:"Agent Email",rules:[{required:!0,message:"Please don't leave blank the agent information!"},{type:"email",message:"Please input the right format of an email"}],hasFeedback:!0,children:Object(m.jsx)(g.a,{style:{width:"80%"}})}),Object(m.jsx)(f.a.Item,Object(p.a)(Object(p.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"Add"})}))]}))})}var Qe=a(184).a.Group,et=["Admin","Operator"],tt=["Admin"];function at(e){e.loginInfo;var t=r.a.useState(tt),a=Object(h.a)(t,2),i=a[0],n=a[1],s=f.a.useForm(),l=Object(h.a)(s,1)[0];console.log(i);return Object(m.jsx)(O.a,{title:"Grant Permission",children:Object(m.jsxs)(f.a,Object(p.a)(Object(p.a)({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}}),{},{form:l,name:"Add Agents",onFinish:function(e){l.setFields([{name:"username",errors:[]}]),l.setFields([{name:"permission",errors:[]}]),console.log("papa"),I()({url:"http://localhost:8080/airlineStaff/grantPermission",method:"POST",data:{userName:e.username,airlineName:"Cathay Pacific",permission:i}}).then((function(e){if(e.data)if(console.log(e.data),!0===e.data.success)console.log("haha"),ve.b.success("Success");else{var t=e.data;!1===t.nameValid?l.setFields([{name:"username",errors:["AirlineStaff Not Found!"]}]):!1===t.permissionValid&&l.setFields([{name:"permission",errors:["The airlineStaff already has the permission!"]}])}}))},scrollToFirstError:!0,children:[Object(m.jsx)(f.a.Item,{name:"username",label:"Staff UserName",rules:[{required:!0,message:"Please input the username!"}],children:Object(m.jsx)(g.a,{})}),Object(m.jsx)(f.a.Item,{name:"permission",label:"Permission Type",children:Object(m.jsx)(Qe,{options:et,value:tt,onChange:function(e){n(e)}})}),Object(m.jsx)(f.a.Item,Object(p.a)(Object(p.a)({},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:Object(m.jsx)(c.a,{type:"primary",htmlType:"submit",children:"Grant Permission"})}))]}))})}var it=D.a.Header,rt=D.a.Content,nt=D.a.Sider,st=D.a.Footer;R.a.SubMenu;function lt(e){var t=e.initializingTab,a=Object(v.f)(),r=Object(i.useState)("customer"),n=Object(h.a)(r,2),s=n[0],l=n[1],c=Object(i.useState)(""),o=Object(h.a)(c,2),d=o[0],u=o[1],j=Object(i.useState)(!1),b=Object(h.a)(j,2),p=b[0],f=b[1],O=Object(i.useState)(null),g=Object(h.a)(O,2),y=g[0],k=g[1],C=Object(i.useState)(""),S=Object(h.a)(C,2),w=S[0],T=S[1],F=Object(i.useState)(!1),P=Object(h.a)(F,2),Y=P[0],z=P[1],G=Object(i.useState)(!1),U=Object(h.a)(G,2),K=U[0],H=U[1],W=Object(i.useState)(!1),Z=Object(h.a)(W,2),X=Z[0],J=Z[1],$=Object(i.useState)("customer"),Q=Object(h.a)($,2),ee=Q[0],te=Q[1],ae=Object(i.useRef)(null),ie=Object(i.useRef)(null),re={userName:"haha"};Object(i.useEffect)((function(){l(t),I()({url:"http://localhost:8080/index/findAllFlights",method:"GET"}).then((function(e){e.data?(console.log("haha"),ae.current=e.data):console.log("No Results")})).catch((function(e){console.log("haha")}))}),[]);var se={customer:Object(m.jsx)(L,{loginInfo:ie,updateSelection:u,setActionType:T,defaultData:ae,setFlightResult:k}),agent:Object(m.jsx)(oe,{loginInfo:ie,updateSelection:u,setActionType:T,defaultData:ae,setFlightResult:k}),staff:Object(m.jsx)(ye,{loginInfo:ie,updateSelection:u,setActionType:T,setFlightResult:k}),global:Object(m.jsx)(Ce,{loginInfo:ie,updateSelection:u,setActionType:T,setFlightResult:k})},ce={"Flight CRUD":Object(m.jsx)(ze,{loginInfo:ie}),"My flights":Object(m.jsx)(ne,{userType:t,actionTab:"view",flightsResult:y,setFlightResult:k,actionType:w}),"Search flights":Object(m.jsx)(ne,{userType:t,loginInfo:ie,actionTab:"search",flightsResult:y,setFlightResult:k,actionType:w}),"Purchase tickets":Object(m.jsx)(ne,{userType:t,loginInfo:ie,actionTab:"purchase",flightsResult:y,setFlightResult:k,actionType:w}),"Track spending":Object(m.jsx)(le,{}),"Top customers":Object(m.jsx)(je,{}),"Create order":Object(m.jsx)(ne,{userType:t,loginInfo:ie,actionTab:"purchase",flightsResult:y,setFlightResult:k,actionType:w}),"My customer orders":Object(m.jsx)(ne,{userType:t,loginInfo:ie,actionTab:"search",flightsResult:y,setFlightResult:k,actionType:w}),"Commission statistics":Object(m.jsx)(he,{}),"Add airport":Object(m.jsx)(ke,{loginInfo:ie}),"Add airplane":Object(m.jsx)(Ie,{loginInfo:ie}),"Add booking agent":Object(m.jsx)($e,{loginInfo:ie}),"View Agents":Object(m.jsx)(Ue,{}),"View Reports":Object(m.jsx)(Ke,{}),"Top destinations":Object(m.jsx)(He,{}),"Revenue Comparison":Object(m.jsx)(We,{}),"Frequent customers":Object(m.jsx)(Xe,{}),"Grant permission":Object(m.jsx)(at,{loginInfo:ie})},de=Object(m.jsxs)(R.a,{children:[!re&&Object(m.jsx)(R.a.Item,{icon:Object(m.jsx)(B.a,{}),children:Object(m.jsx)("a",{onClick:function(){z(!0)},children:"Log In"})}),Object(m.jsx)(R.a.Item,{icon:Object(m.jsx)(x.a,{}),children:Object(m.jsx)("a",{onClick:function(){H(!0)},children:"Account Information"})})]}),ue=[{title:"Email",description:ie.current?ie.current.email:""},{title:"Name",description:ie.current?ie.current.name:""}],me=[{title:"Email",description:ie.current?ie.current.email:""},{title:"Your Id",description:ie.current?ie.current.bookingAgentId:""}],be=[{title:"User Name",description:ie.current?ie.current.username:""},{title:"First Name",description:ie.current?ie.current.firstName:""},{title:"Last Name",description:ie.current?ie.current.lastName:""},{title:"Permission Level",description:ie.current?ie.current.permissionDescription.join(", "):""}];["Admin","Operator"].join(", ");return Object(m.jsxs)(D.a,{children:[Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Account Information",visible:K,onCancel:function(){H(!1)},footer:[],children:Object(m.jsx)(V.b,{itemtlayout:"horizontal",dataSource:"customer"===s?ue:"staff"===s?be:me,renderItem:function(e){return Object(m.jsx)(V.b.Item,{children:Object(m.jsx)(V.b.Item.Meta,{title:e.title,description:e.description})})}})}),Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Login",visible:Y,onCancel:function(){z(!1)},footer:[],children:Object(m.jsx)(A,{loginInfo:ie,setInitializeType:te,setLoginModalVisible:z,setNavigateBar:l,setRegisterModalVisible:J})}),Object(m.jsx)(M.a,{destroyOnClose:!0,title:"Login",visible:X,onCancel:function(){J(!1)},footer:[],children:Object(m.jsx)(N,{initializeType:ee,setRegisterModalVisible:J})}),Object(m.jsx)(it,{className:"header",style:{position:"fixed",zIndex:2,width:"100%"},children:Object(m.jsxs)(R.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[t],selectedKeys:[s],onClick:function(e){l(e.key),a("/"+e.key,{replace:!0})},style:{marginLeft:"100px"},children:[Object(m.jsx)(R.a.Item,{children:"Customer"},"customer"),Object(m.jsx)(R.a.Item,{children:"Agent"},"agent"),Object(m.jsx)(R.a.Item,{children:"Staff"},"staff"),Object(m.jsx)(R.a.Item,{children:"Global"},"global")]})}),Object(m.jsx)(_.a,{overlay:de,children:re?Object(m.jsx)(E.a,{style:{marginLeft:"1200px",zIndex:3,position:"fixed",top:"10px"},size:"large",backgroundColor:"green",children:re.userName[0].toUpperCase()}):Object(m.jsx)(E.a,{style:{marginLeft:"1200px",zIndex:3,position:"fixed",top:"10px"},size:"large",icon:Object(m.jsx)(x.a,{})})}),Object(m.jsxs)(D.a,{style:{minHeight:"100vh",marginTop:64},children:[Object(m.jsx)(nt,{width:250,height:100,className:"site-layout-background",collapsible:!0,collapsed:p,onCollapse:f,children:se[s]}),Object(m.jsxs)(D.a,{style:{padding:"0 24px 24px"},children:[Object(m.jsxs)(q.a,{style:{margin:"16px 0"},children:[Object(m.jsx)(q.a.Item,{children:"Home"}),Object(m.jsx)(q.a.Item,{children:s.charAt(0).toUpperCase()+s.slice(1)}),Object(m.jsx)(q.a.Item,{children:d})]}),Object(m.jsx)(rt,{className:"site-layout-background",style:{padding:24,margin:0},children:ce[d]})]})]}),Object(m.jsx)(D.a,{style:{textAlign:"center",marginBottom:0},children:Object(m.jsx)(st,{children:"2021 Global Airline All rights reserved."})})]})}function ct(){return Object(m.jsx)(d.a,{children:Object(m.jsxs)(v.c,{children:[Object(m.jsx)(v.a,{path:"/",element:Object(m.jsx)(b,{})}),Object(m.jsx)(v.a,{path:"/customer",element:Object(m.jsx)(lt,{initializingTab:"customer"})}),Object(m.jsx)(v.a,{path:"/agent",element:Object(m.jsx)(lt,{initializingTab:"agent"})}),Object(m.jsx)(v.a,{path:"/staff",element:Object(m.jsx)(lt,{initializingTab:"staff"})}),Object(m.jsx)(v.a,{path:"/global",element:Object(m.jsx)(lt,{initializingTab:"global"})})]})})}s.a.render(Object(m.jsx)(ct,{}),document.getElementById("root")),P()},717:function(e,t,a){}},[[1164,1,2]]]);
//# sourceMappingURL=main.68d02d26.chunk.js.map